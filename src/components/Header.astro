---
import ThemeToggle from './ThemeToggle.astro';
const currentPath = Astro.url.pathname;
---

<header class="sticky top-0 z-50 backdrop-blur-lg bg-white/80 dark:bg-gray-900/80 border-b border-gray-100 dark:border-gray-800 shadow-sm animate-fade-in-up">
  <nav class="max-w-7xl mx-auto px-4 py-3 sm:py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="group flex items-center space-x-2">
        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-base sm:text-xl group-hover:scale-110 group-hover:rotate-12 transition-all duration-300 shadow-lg">
          JV
        </div>
        <span class="hidden sm:inline text-lg sm:text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent">
          Ji≈ô√≠ Vesel√Ω
        </span>
      </a>
      
      <!-- Mobile Menu Button -->
      <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
      
      <!-- Desktop Navigation -->
      <ul class="hidden md:flex items-center gap-6 lg:gap-8">
        <li>
          <a
            href="/"
            class={`font-medium transition-all duration-300 hover:scale-110 inline-block ${currentPath === '/' ? 'text-purple-600 font-bold' : 'text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white'}`}
          >
            Dom≈Ø
          </a>
        </li>
        <li>
          <a
            href="/sluzby"
            class={`font-medium transition-all duration-300 hover:scale-110 inline-block ${currentPath === '/sluzby' ? 'text-purple-600 font-bold' : 'text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white'}`}
          >
            Slu≈æby
          </a>
        </li>
        <li>
          <a
            href="/projekty"
            class={`font-medium transition-all duration-300 hover:scale-110 inline-block ${currentPath === '/projekty' ? 'text-purple-600 font-bold' : 'text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white'}`}
          >
            Portfolio
          </a>
        </li>
        <li>
          <a
            href="/blog"
            class={`font-medium transition-all duration-300 hover:scale-110 inline-block ${currentPath.startsWith('/blog') ? 'text-purple-600 font-bold' : 'text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white'}`}
          >
            Blog
          </a>
        </li>
        <li>
          <ThemeToggle />
        </li>
        <li>
          <a
            href="/kontakt"
            class="px-5 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:scale-110 transition-all duration-300 inline-block"
          >
            Kontakt üí¨
          </a>
        </li>
      </ul>
    </div>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden mt-4 pb-4 space-y-3">
      <a href="/" class="block px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-gray-800 hover:text-purple-600 rounded-lg transition-all duration-300 font-medium">
        Dom≈Ø
      </a>
      <a href="/sluzby" class="block px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-gray-800 hover:text-purple-600 rounded-lg transition-all duration-300 font-medium">
        Slu≈æby
      </a>
      <a href="/projekty" class="block px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-gray-800 hover:text-purple-600 rounded-lg transition-all duration-300 font-medium">
        Portfolio
      </a>
      <a href="/blog" class="block px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-purple-50 dark:hover:bg-gray-800 hover:text-purple-600 rounded-lg transition-all duration-300 font-medium">
        Blog
      </a>
      <div class="flex justify-center py-2">
        <ThemeToggle />
      </div>
      <a href="/kontakt" class="block px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold text-center">
        Kontakt üí¨
      </a>
    </div>
  </nav>
</header>

<script>
  function initMobileMenu() {
    const btn = document.getElementById('mobile-menu-btn');
    const menu = document.getElementById('mobile-menu');

    if (btn && menu) {
      btn.addEventListener('click', () => {
        menu.classList.toggle('hidden');
      });
    }
  }

  // Initialize on page load
  initMobileMenu();

  // Re-initialize after view transitions
  document.addEventListener('astro:page-load', () => {
    initMobileMenu();
  });
</script>