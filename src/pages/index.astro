---
import MainLayout from '../layouts/MainLayout.astro';
import HeroSection from '../components/sections/HeroSection.astro';
import StatsSection from '../components/sections/StatsSection.astro';
import FeaturedProjectsSection from '../components/sections/FeaturedProjectsSection.astro';
import ServicesSection from '../components/sections/ServicesSection.astro';
import TechStackSection from '../components/sections/TechStackSection.astro';
import CTASection from '../components/sections/CTASection.astro';
import { client } from '../lib/sanity';

// Fetch featured projekty
const projects = await client.fetch(`
  *[_type == "project" && featured == true][0...3] | order(_createdAt desc) {
    _id,
    title,
    slug,
    category,
    description,
    technologies,
    mainImage
  }
`);
---

<MainLayout
  title="Domů"
  description="Freelance vývojář specializující se na moderní webové aplikace. Tvorba rychlých a responzivních webů s React, Next.js a Astro."
>
  <HeroSection />
  <StatsSection />
  <FeaturedProjectsSection projects={projects} />
  <ServicesSection />
  <TechStackSection />
  <CTASection />
</MainLayout>
